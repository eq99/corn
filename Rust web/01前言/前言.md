要点：

- Rust web 开发现状
- Why Rust
- 项目介绍



# Rust web 开发现状

Rust 语言目前处于造轮子的时代，许多应用还没有成熟的解决方案，web 更是如此。Web 开发要求简单快速，生态完善，这样才能降低开发成本，适应快速迭代的互联网应用。

目前 Rust 语言能用的 web 框架主要有如下几个：

- [Actix Web](https://actix.rs/)
- [Rocket](https://rocket.rs/)

- [Warp](https://github.com/seanmonstar/warp)
- [Tide](https://github.com/http-rs/tide)

Rust 语言的设计深受函数式语言的影响，利用 Rust 语言构建的应用可能有灵活的模式，除此之外，Rust 语言的所有权机制导致其他语言的某些设计模式无法照搬到 Rust 语言中。如果阅读以上 web 框架的示例程序，单单是路由的处理，各个框架的都有自己的特色。

该选择哪个框架，这是大家比较关心的问题。要回答好这个问题，还要从 web 开发本身说起。Web 开发是一个系统性工程，最重要的视图处理。

所谓的视图，就是 URL 对应的资源，可以是 HTML 页面、也可以是 JSON 数据，还有远程调用 RPC 等，简单的讲就是响应用户请求。目前流行的解决方案是为每个 URL 路径的请求方法编写响应的处理函数（业务逻辑）。

连接数据库是 Web 开发的核心，因为现代互联网应用都是数据密集型应用，目前常用的解决方案是先定义数据模型（Model），然后基于模型生成数据库表，沟通这两者的桥梁是 ORM，[Diesel](https://diesel.rs/) Rust语言常用的 ORM 框架。

web 开发还包括如下一些主题：

- 安全：身份认证，权限管理
- 静态资源：js/css
- 对象存储：图片，视频，文档
- 缓存
- 限流
- 国际化
- 运维
- 与其他服务集成

Java 语言的 web 生态能出色的解决以上主题，这是大部分公司招聘 Java 程序员的原因，Rust 这门新语言还处于造轮子的阶段，可能你选的框架要啥没啥。

所以到底该怎么选 web 框架？

如果你想用 Rust 做点东西，结合自己的经验给两点建议做参考：

- 路由处理要简单，因为 web 开发大部分工作就是写路由处理函数（业务逻辑），越是简单，代码越少，代码越不容易出错，越容易维护。
- 常见的 web 组件：数据库，session，静态资源等有没有。

如果你想自己写 web 框架，也建议从以上主题入手，这样大家都会用你的框架写 APP。

 参考资料：https://www.arewewebyet.org/

# Why Rust

自己学 Rust 语言一段时间之后，发现自己越来越爱 Rust 语言了，造轮子特别爽。相比于其他语言，Rust 不需要折腾。

用其他一些语言写应用，还没写就需要安装这个软件那个软件，配置这个环境变量那个环境变量，下载这个包那个包，还没开始我就不想写了。有的语言模块化特别困难，你只是想把代码逻辑分到几个源文件里面，然后你又开始了配置，可能还要学习一门新的脚本语言才能编译你的项目。怎么分享你自己的项目也是一个问题。

用了 Rust 语言之后，发现写代码能如此快乐，只需要专注于你想做的事情，而不是折腾环境。我自己写了一个小模块，很快就发布到了 crate.io，想到别人有朝一日也能用上我这个小菜鸟的代码，成就感就上来了（虽然实际可能没人用，但是一切皆有可能，万一呢，你说对吧）。

用 Rust 写了几个小应用之后，相信你也会越来越喜欢 Rust。造轮子造得开心了，自然而然，我就想能不能把自己的网站用 Rust 语言重构一下，这样就可以用上自己的轮子了。

这就是自己为什么要用 Rust 构建 web 应用。

之所以选择 Rust 语言构建 web 应用，其实还有一个原因：希望有朝一日能用上自己写的 web 框架。虽然这种想法有些不切实际，因为现在普遍流行的一个思想是：不要重复造轮子。个人认为这说法不准确，应该改成：要高效率的造轮子。如果我们老是用别人的轮子，我们就会变懒，不仅行为变懒，思想也会变懒，一旦发现问题就凉凉了。

对于已经存在的轮子，我们的想法是能不能自己也造一个类似的，虽然可能功能没有那么完善。最重要的是从已存在的轮子学习优点，发现缺点与不足，然后提出自己的观点。”不要重复造轮子“这个说法有很强的误导性，我们不仅要造轮子，更要高效的造轮子。

# 项目介绍

接下来我们将利用 [Tide](https://github.com/http-rs/tide) 这个框架构建一个博客应用。

